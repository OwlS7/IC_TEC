<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular Interactiva â€“ Plan Personal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">

  <h1 class="text-3xl font-bold mb-4">ðŸ“˜ Malla Curricular Interactiva â€“ Uso Personal</h1>
  <p class="mb-6 text-gray-700">Marca los cursos aprobados y la malla te mostrarÃ¡ cuÃ¡les estÃ¡n disponibles y cuÃ¡les siguen bloqueados.</p>

  <div id="malla" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>

  <script>
    const cursos = [
      { id: 'CI0200', nombre: 'Examen diagnÃ³stico', req: [] },
      { id: 'CI0202', nombre: 'InglÃ©s bÃ¡sico', req: [] },
      { id: 'MA0101', nombre: 'MatemÃ¡tica general', req: [] },
      { id: 'CI1106', nombre: 'ComunicaciÃ³n escrita', req: [] },
      { id: 'MA1403', nombre: 'MatemÃ¡tica discreta', req: [] },
      { id: 'IC1400', nombre: 'Fundamentos de organizaciÃ³n de computadoras', req: [] },
      { id: 'IC1802', nombre: 'IntroducciÃ³n a la programaciÃ³n', req: [] },
      { id: 'IC1803', nombre: 'Taller de programaciÃ³n', req: [] },
      { id: 'IC2101', nombre: 'ProgramaciÃ³n orientada a objetos', req: ['IC1802', 'IC1803'] },
      { id: 'IC2001', nombre: 'Estructuras de datos', req: [] },
      { id: 'IC3002', nombre: 'AnÃ¡lisis de algoritmos', req: ['IC2001', 'MA1102'] },
      { id: 'IC4301', nombre: 'Bases de datos I', req: ['IC2001'] },
      { id: 'IC4302', nombre: 'Bases de datos II', req: ['IC4301'] },
      { id: 'IC7841', nombre: 'Proyecto de ingenierÃ­a de software', req: ['IC4302'] },
    ];

    const aprobados = new Set(JSON.parse(localStorage.getItem('aprobados') || '[]'));

    function render() {
      const cont = document.getElementById('malla');
      cont.innerHTML = '';

      cursos.forEach(curso => {
        const aprobado = aprobados.has(curso.id);
        const desbloqueado = curso.req.every(r => aprobados.has(r));

        let color = 'bg-red-200';
        let estado = 'Bloqueado';

        if (desbloqueado) {
          color = 'bg-yellow-200';
          estado = 'Disponible';
        }
        if (aprobado) {
          color = 'bg-green-300';
          estado = 'Aprobado';
        }

        const card = document.createElement('div');
        card.className = `p-4 rounded-xl shadow ${color}`;
        card.innerHTML = `
          <h2 class="font-bold">${curso.id}</h2>
          <p class="text-sm">${curso.nombre}</p>
          <p class="text-xs mt-2">Estado: <b>${estado}</b></p>
          <button class="mt-3 px-3 py-1 bg-black text-white rounded text-sm">Marcar aprobado</button>
        `;

        card.querySelector('button').onclick = () => {
          aprobados.add(curso.id);
          localStorage.setItem('aprobados', JSON.stringify([...aprobados]));
          render();
        };

        cont.appendChild(card);
      });
    }

    render();
  </script>

</body>
</html>
